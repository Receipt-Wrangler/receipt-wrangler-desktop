<app-dialog headerText="Quick Scan" [actionsTemplate]="actionsTemplate">
  <app-upload-image
    [multiple]="true"
    (fileLoaded)="fileLoaded($event)"
  ></app-upload-image>
  <div
    *ngIf="images.length === 0"
  >
    <strong> Select images to upload</strong>
  </div>
  <carousel
    [interval]="0"
    [isAnimated]="true"
    [showIndicators]="false"
  >
    <slide *ngFor="let preview of images; let i = index">
      <div class="d-flex flex-column justify-content-center">
        <img
          class="mb-2"
          alt="quick scan image"
          [src]="preview.encodedImage || preview.url ?? ''"
        >
        <app-group-autocomplete
          [inputFormControl]="form | formGet : 'groupIds.' + i"
        ></app-group-autocomplete>
        <app-user-autocomplete
          class="w-100"
          label="Paid By"
          [inputFormControl]="form | formGet : 'paidByUserIds.' + i"
          [groupId]="form.get('groupIds.' + i)?.value"
          [selectGroupMembersOnly]="true"
        ></app-user-autocomplete>
        <app-status-select
          [inputFormControl]="form | formGet : 'statuses.' + i"
        ></app-status-select>

      </div>
    </slide>

  </carousel>

  <app-dialog-footer
    submitButtonTooltip="Submit Scan"
    [disableWhenProgressBarIsShown]="true"
    (submitClicked)="submitButtonClicked()"
    (cancelClicked)="cancelButtonClicked()"
  ></app-dialog-footer>
</app-dialog>

<ng-template #successfullScanSnackbar>
  <div class="d-flex justify-content-end align-items-center">
    <span class="me-4">
      Receipt successfully scan. Click navigate to view scanned receipt.
    </span>
    <app-button
      buttonText="Navigate"
      matButtonType="basic"
      color="secondary"
      [buttonRouterLink]="['/receipts/' + quickScannedReceiptId + '/view']"
      (clicked)="closeSnackbar()"
    ></app-button>
  </div>
</ng-template>

<ng-template #actionsTemplate>
  <app-button
    matButtonType="iconButton"
    tooltip="Upload images"
    icon="upload"
    (clicked)="openImageUploadComponent()">
  </app-button>
</ng-template>
