<app-dialog headerText="Filter Receipts">
  <ng-template
    [ngTemplateOutlet]="filterField"
    [ngTemplateOutletContext]="{
      label: 'Date',
      fieldName: 'date',
      type: 'date'
    }"
  ></ng-template>

  <ng-template
    [ngTemplateOutlet]="filterField"
    [ngTemplateOutletContext]="{
      label: 'Name',
      fieldName: 'name',
      type: 'text'
    }"
  ></ng-template>

  <ng-template
    [ngTemplateOutlet]="filterField"
    [ngTemplateOutletContext]="{
      label: 'Paid by',
      fieldName: 'paidBy',
      type: 'users',
    }"
  ></ng-template>

  <ng-template
    [ngTemplateOutlet]="filterField"
    [ngTemplateOutletContext]="{
      label: 'Amount',
      fieldName: 'amount',
      type: 'number',
      isCurrency: true
    }"
  ></ng-template>

  <ng-template
    [ngTemplateOutlet]="filterField"
    [ngTemplateOutletContext]="{
      label: 'Resolved Date',
      fieldName: 'resolvedDate',
      type: 'date'
    }"
  ></ng-template>

  <app-dialog-footer
    (submitClicked)="submitButtonClicked()"
    (cancelClicked)="cancelButtonClicked()"
  ></app-dialog-footer>
</app-dialog>

<ng-template
  #filterField
  let-label="label"
  let-fieldName="fieldName"
  let-type="type"
  let-isCurrency="isCurrency"
>
  <div class="row g-1">
    <app-input
      *ngIf="type === 'text' || type === 'number'"
      class="col"
      [label]="label"
      [isCurrency]="isCurrency"
      [inputFormControl]="form | formGet : fieldName + '.value'"
    ></app-input>
    <app-user-autocomplete
      *ngIf="type === 'users'"
      class="col"
      [label]="label"
      [multiple]="true"
      [inputFormControl]="form | formGet : fieldName + '.value'"
    ></app-user-autocomplete>
    <app-datepicker
      *ngIf="type === 'date'"
      class="col"
      [label]="label"
      [inputFormControl]="form | formGet : fieldName + '.value'"
    >
    </app-datepicker>
    <app-select
      class="col"
      label="Operation"
      [inputFormControl]="form | formGet : fieldName + '.operation'"
      [options]="type | operations"
    ></app-select>
  </div>
</ng-template>
