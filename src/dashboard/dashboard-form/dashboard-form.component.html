<app-dialog [headerText]="headerText">
  <form [formGroup]="form" (ngSubmit)="submit()">
    <div class="d-flex flex-column">
      <div class="mb-2">
        <app-input
          label="Dashboard Name"
          [inputFormControl]="form | formGet : 'name'"
        ></app-input>
      </div>
      <app-form-section headerText="Widgets" [indent]="false">
        <div class="ms-2">
          <app-checkbox
            label="Summary"
            [inputFormControl]="form | formGet : 'showSummaryCard'"
          ></app-checkbox>

          <div class="d-flex align-items-center">
            <h6>Filtered Receipts</h6>
            <app-add-button
              tooltip="Add filtered receipt widget"
              [disabled]="(filterOpen | async) !== undefined"
              (clicked)="addFilteredReceiptWidget()"
            ></app-add-button>
          </div>
          <mat-list>
            <ng-container
              *ngFor="let widget of widgets.controls; let i = index"
            >
              <mat-list-item
                class="h-100"
                *ngIf="
                  widget?.value?.widgetType === WidgetTypeEnum.FILTEREDRECEIPTS
                "
              >
                <app-input
                  label="Widget Name"
                  [inputFormControl]="form | formGet : 'name'"
                ></app-input>
                <app-receipt-filter
                  (formInitialized)="addFilterToWidget($event, i)"
                ></app-receipt-filter>
              </mat-list-item>
            </ng-container>
          </mat-list>
        </div>
      </app-form-section>
    </div>
    <app-dialog-footer
      [disableWhenProgressBarIsShown]="true"
      (cancelClicked)="cancelButtonClicked()"
    ></app-dialog-footer>
  </form>
</app-dialog>
