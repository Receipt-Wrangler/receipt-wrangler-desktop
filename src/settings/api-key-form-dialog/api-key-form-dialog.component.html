<app-dialog [headerText]="headerText">
  <div *ngIf="!apiKeyResult">
    <form [formGroup]="form">
      <div class="mb-2">
        <app-input
          label="Name"
          placeholder="Enter API key name"
          [inputFormControl]="form | formGet : 'name'"
        ></app-input>
      </div>

      <div class="mb-2">
        <app-input
          label="Description"
          placeholder="Enter API key description (optional)"
          [inputFormControl]="form | formGet : 'description'"
        ></app-input>
      </div>

      <div class="mb-2">
        <app-select
          label="Scope"
          optionValueKey="value"
          optionDisplayKey="label"
          [inputFormControl]="form | formGet : 'scope'"
          [options]="apiKeyScopes"
        ></app-select>
      </div>
    </form>

    <app-dialog-footer
      [submitButtonTooltip]="apiKey ? 'Update API Key' : 'Create API Key'"
      (submitClicked)="submitButtonClicked()"
      (cancelClicked)="cancelButtonClicked()"
    ></app-dialog-footer>
  </div>

  <div *ngIf="apiKeyResult" class="text-center">
    <div class="alert alert-warning mb-4">
      <mat-icon class="me-2">warning</mat-icon>
      <strong>Important:</strong> This API key will only be shown once. Make sure to copy it now!
    </div>

    <div class="mb-4">
      <h4>Your new API key:</h4>
      <div class="d-flex align-items-center justify-content-center gap-2 mt-3">
        <code class="p-2 bg-light border rounded flex-grow-1 text-break">{{ apiKeyResult.key }}</code>
        <app-button
          matButtonType="iconButton"
          icon="content_copy"
          color="primary"
          tooltip="Copy to clipboard"
          (clicked)="copyToClipboard()"
        ></app-button>
      </div>
    </div>

    <div class="d-flex justify-content-center">
      <app-button
        buttonText="Close"
        color="primary"
        (clicked)="closeDialog()"
      ></app-button>
    </div>
  </div>
</app-dialog>
